{"ast":null,"code":"import _asyncToGenerator from \"/Users/priyasingh/Desktop/aws-udacity-projects/cd0354-monolith-to-microservices-project/udagram-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nfunction AuthLoginComponent_ion_text_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 6)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nexport class AuthLoginComponent {\n  constructor(formBuilder, auth, modal) {\n    this.formBuilder = formBuilder;\n    this.auth = auth;\n    this.modal = modal;\n    this.error = '';\n  }\n  ngOnInit() {\n    this.loginForm = this.formBuilder.group({\n      password: new FormControl('', {\n        nonNullable: true,\n        validators: Validators.required\n      }),\n      email: new FormControl('', {\n        nonNullable: true,\n        validators: [Validators.required, Validators.pattern('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$')]\n      })\n    });\n  }\n  onSubmit(event) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      event.preventDefault();\n      if (!_this.loginForm.valid) {\n        return;\n      }\n      try {\n        yield _this.auth.login(_this.loginForm.controls.email.value, _this.loginForm.controls.password.value);\n        yield _this.modal.dismiss();\n      } catch (err) {\n        _this.error = err.statusText || 'An error occurred during login';\n        throw err;\n      }\n    })();\n  }\n  static {\n    this.ɵfac = function AuthLoginComponent_Factory(t) {\n      return new (t || AuthLoginComponent)(i0.ɵɵdirectiveInject(i1.NonNullableFormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ModalController));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AuthLoginComponent,\n      selectors: [[\"app-auth-login\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 12,\n      vars: 3,\n      consts: [[3, \"submit\", \"formGroup\"], [\"position\", \"floating\", \"color\", \"primary\"], [\"type\", \"email\", \"formControlName\", \"email\", \"required\", \"\"], [\"type\", \"password\", \"formControlName\", \"password\", \"required\", \"\"], [\"color\", \"primary\", \"type\", \"submit\", 3, \"disabled\"], [\"color\", \"danger\", 4, \"ngIf\"], [\"color\", \"danger\"]],\n      template: function AuthLoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"form\", 0);\n          i0.ɵɵlistener(\"submit\", function AuthLoginComponent_Template_form_submit_0_listener($event) {\n            return ctx.onSubmit($event);\n          });\n          i0.ɵɵelementStart(1, \"ion-item\")(2, \"ion-label\", 1);\n          i0.ɵɵtext(3, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(4, \"ion-input\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"ion-item\")(6, \"ion-label\", 1);\n          i0.ɵɵtext(7, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(8, \"ion-input\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"ion-button\", 4);\n          i0.ɵɵtext(10, \" Log In \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(11, AuthLoginComponent_ion_text_11_Template, 3, 1, \"ion-text\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"disabled\", !ctx.loginForm.valid);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n        }\n      },\n      dependencies: [IonicModule, i3.IonButton, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonText, i3.TextValueAccessor, CommonModule, i4.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["FormControl","Validators","ReactiveFormsModule","IonicModule","CommonModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","error","AuthLoginComponent","constructor","formBuilder","auth","modal","ngOnInit","loginForm","group","password","nonNullable","validators","required","email","pattern","onSubmit","event","_this","_asyncToGenerator","preventDefault","valid","login","controls","value","dismiss","err","statusText","ɵɵdirectiveInject","i1","NonNullableFormBuilder","i2","AuthService","i3","ModalController","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","AuthLoginComponent_Template","rf","ctx","ɵɵlistener","AuthLoginComponent_Template_form_submit_0_listener","$event","ɵɵelement","ɵɵtemplate","AuthLoginComponent_ion_text_11_Template","ɵɵproperty","IonButton","IonInput","IonItem","IonLabel","IonText","TextValueAccessor","i4","NgIf","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","RequiredValidator","FormGroupDirective","FormControlName","styles"],"sources":["/Users/priyasingh/Desktop/aws-udacity-projects/cd0354-monolith-to-microservices-project/udagram-frontend/src/app/auth/auth-login/auth-login.component.ts","/Users/priyasingh/Desktop/aws-udacity-projects/cd0354-monolith-to-microservices-project/udagram-frontend/src/app/auth/auth-login/auth-login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NonNullableFormBuilder, FormGroup, FormControl, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule, ModalController } from '@ionic/angular';\nimport { CommonModule } from '@angular/common';\nimport { AuthService } from '../services/auth.service';\n\ninterface LoginForm {\n  email: FormControl<string>;\n  password: FormControl<string>;\n}\n\n@Component({\n  selector: 'app-auth-login',\n  templateUrl: './auth-login.component.html',\n  styleUrls: ['./auth-login.component.scss'],\n  standalone: true,\n  imports: [\n    IonicModule,\n    CommonModule,\n    ReactiveFormsModule\n  ]\n})\nexport class AuthLoginComponent implements OnInit {\n  loginForm!: FormGroup<LoginForm>;\n  error: string = '';\n\n  constructor(\n    private formBuilder: NonNullableFormBuilder,\n    private auth: AuthService,\n    private modal: ModalController\n  ) { }\n\n  ngOnInit() {\n    this.loginForm = this.formBuilder.group<LoginForm>({\n      password: new FormControl('', { \n        nonNullable: true, \n        validators: Validators.required \n      }),\n      email: new FormControl('', {\n        nonNullable: true,\n        validators: [\n          Validators.required,\n          Validators.pattern('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$')\n        ]\n      })\n    });\n  }\n\n  async onSubmit(event: Event) {\n    event.preventDefault();\n\n    if (!this.loginForm.valid) { return; }\n\n    try {\n      await this.auth.login(\n        this.loginForm.controls.email.value,\n        this.loginForm.controls.password.value\n      );\n      await this.modal.dismiss();\n    } catch (err: any) {\n      this.error = err.statusText || 'An error occurred during login';\n      throw err;\n    }\n  }\n}","<form [formGroup]=\"loginForm\" (submit)=\"onSubmit($event)\">\n  <ion-item>\n    <ion-label position=\"floating\" color=\"primary\">Email</ion-label>\n    <ion-input type=\"email\" formControlName=\"email\" required></ion-input>\n  </ion-item>\n  <ion-item>\n    <ion-label position=\"floating\" color=\"primary\">Password</ion-label>\n    <ion-input type=\"password\" formControlName=\"password\" required></ion-input>\n  </ion-item>\n  <ion-button \n    color=\"primary\" \n    type=\"submit\"\n    [disabled]=\"!loginForm.valid\">\n    Log In\n  </ion-button>\n  <ion-text color=\"danger\" *ngIf=\"error\">\n    <p>{{ error }}</p>\n  </ion-text>\n</form>"],"mappings":";AACA,SAA4CA,WAAW,EAAEC,UAAU,EAAEC,mBAAmB,QAAQ,gBAAgB;AAChH,SAASC,WAAW,QAAyB,gBAAgB;AAC7D,SAASC,YAAY,QAAQ,iBAAiB;;;;;;;;ICa1CC,EADF,CAAAC,cAAA,kBAAuC,QAClC;IAAAD,EAAA,CAAAE,MAAA,GAAW;IAChBF,EADgB,CAAAG,YAAA,EAAI,EACT;;;;IADNH,EAAA,CAAAI,SAAA,GAAW;IAAXJ,EAAA,CAAAK,iBAAA,CAAAC,MAAA,CAAAC,KAAA,CAAW;;;ADMlB,OAAM,MAAOC,kBAAkB;EAI7BC,YACUC,WAAmC,EACnCC,IAAiB,EACjBC,KAAsB;IAFtB,KAAAF,WAAW,GAAXA,WAAW;IACX,KAAAC,IAAI,GAAJA,IAAI;IACJ,KAAAC,KAAK,GAALA,KAAK;IALf,KAAAL,KAAK,GAAW,EAAE;EAMd;EAEJM,QAAQA,CAAA;IACN,IAAI,CAACC,SAAS,GAAG,IAAI,CAACJ,WAAW,CAACK,KAAK,CAAY;MACjDC,QAAQ,EAAE,IAAIrB,WAAW,CAAC,EAAE,EAAE;QAC5BsB,WAAW,EAAE,IAAI;QACjBC,UAAU,EAAEtB,UAAU,CAACuB;OACxB,CAAC;MACFC,KAAK,EAAE,IAAIzB,WAAW,CAAC,EAAE,EAAE;QACzBsB,WAAW,EAAE,IAAI;QACjBC,UAAU,EAAE,CACVtB,UAAU,CAACuB,QAAQ,EACnBvB,UAAU,CAACyB,OAAO,CAAC,iDAAiD,CAAC;OAExE;KACF,CAAC;EACJ;EAEMC,QAAQA,CAACC,KAAY;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACzBF,KAAK,CAACG,cAAc,EAAE;MAEtB,IAAI,CAACF,KAAI,CAACV,SAAS,CAACa,KAAK,EAAE;QAAE;MAAQ;MAErC,IAAI;QACF,MAAMH,KAAI,CAACb,IAAI,CAACiB,KAAK,CACnBJ,KAAI,CAACV,SAAS,CAACe,QAAQ,CAACT,KAAK,CAACU,KAAK,EACnCN,KAAI,CAACV,SAAS,CAACe,QAAQ,CAACb,QAAQ,CAACc,KAAK,CACvC;QACD,MAAMN,KAAI,CAACZ,KAAK,CAACmB,OAAO,EAAE;MAC5B,CAAC,CAAC,OAAOC,GAAQ,EAAE;QACjBR,KAAI,CAACjB,KAAK,GAAGyB,GAAG,CAACC,UAAU,IAAI,gCAAgC;QAC/D,MAAMD,GAAG;MACX;IAAC;EACH;;;uBAzCWxB,kBAAkB,EAAAR,EAAA,CAAAkC,iBAAA,CAAAC,EAAA,CAAAC,sBAAA,GAAApC,EAAA,CAAAkC,iBAAA,CAAAG,EAAA,CAAAC,WAAA,GAAAtC,EAAA,CAAAkC,iBAAA,CAAAK,EAAA,CAAAC,eAAA;IAAA;EAAA;;;YAAlBhC,kBAAkB;MAAAiC,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAA3C,EAAA,CAAA4C,mBAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,4BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCtB/BlD,EAAA,CAAAC,cAAA,cAA0D;UAA5BD,EAAA,CAAAoD,UAAA,oBAAAC,mDAAAC,MAAA;YAAA,OAAUH,GAAA,CAAA7B,QAAA,CAAAgC,MAAA,CAAgB;UAAA,EAAC;UAErDtD,EADF,CAAAC,cAAA,eAAU,mBACuC;UAAAD,EAAA,CAAAE,MAAA,YAAK;UAAAF,EAAA,CAAAG,YAAA,EAAY;UAChEH,EAAA,CAAAuD,SAAA,mBAAqE;UACvEvD,EAAA,CAAAG,YAAA,EAAW;UAETH,EADF,CAAAC,cAAA,eAAU,mBACuC;UAAAD,EAAA,CAAAE,MAAA,eAAQ;UAAAF,EAAA,CAAAG,YAAA,EAAY;UACnEH,EAAA,CAAAuD,SAAA,mBAA2E;UAC7EvD,EAAA,CAAAG,YAAA,EAAW;UACXH,EAAA,CAAAC,cAAA,oBAGgC;UAC9BD,EAAA,CAAAE,MAAA,gBACF;UAAAF,EAAA,CAAAG,YAAA,EAAa;UACbH,EAAA,CAAAwD,UAAA,KAAAC,uCAAA,sBAAuC;UAGzCzD,EAAA,CAAAG,YAAA,EAAO;;;UAlBDH,EAAA,CAAA0D,UAAA,cAAAP,GAAA,CAAArC,SAAA,CAAuB;UAYzBd,EAAA,CAAAI,SAAA,GAA6B;UAA7BJ,EAAA,CAAA0D,UAAA,cAAAP,GAAA,CAAArC,SAAA,CAAAa,KAAA,CAA6B;UAGL3B,EAAA,CAAAI,SAAA,GAAW;UAAXJ,EAAA,CAAA0D,UAAA,SAAAP,GAAA,CAAA5C,KAAA,CAAW;;;qBDEnCT,WAAW,EAAAyC,EAAA,CAAAoB,SAAA,EAAApB,EAAA,CAAAqB,QAAA,EAAArB,EAAA,CAAAsB,OAAA,EAAAtB,EAAA,CAAAuB,QAAA,EAAAvB,EAAA,CAAAwB,OAAA,EAAAxB,EAAA,CAAAyB,iBAAA,EACXjE,YAAY,EAAAkE,EAAA,CAAAC,IAAA,EACZrE,mBAAmB,EAAAsC,EAAA,CAAAgC,aAAA,EAAAhC,EAAA,CAAAiC,eAAA,EAAAjC,EAAA,CAAAkC,oBAAA,EAAAlC,EAAA,CAAAmC,iBAAA,EAAAnC,EAAA,CAAAoC,kBAAA,EAAApC,EAAA,CAAAqC,eAAA;MAAAC,MAAA;IAAA;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}